{"version":3,"sources":["images/logo.svg","components/Header.js","components/Card.js","contexts/CurrentUserContext.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoTooltip.js","utils/api.js","utils/newapi.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","from","email","onLogout","pathname","useLocation","history","useHistory","className","src","logo","alt","onClick","push","Card","props","card","onCardClick","id","onCardLike","onCardDelete","isOwn","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","type","link","name","length","CurrentUserContext","React","createContext","Main","cards","onEditProfile","onAddPlace","onEditAvatar","useContext","about","avatar","map","Footer","loggedIn","PopupWithForm","isOpen","title","children","submitButtonText","onClose","onSubmit","auth","noValidate","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","e","preventDefault","infoUser","current","value","ref","defaultValue","placeholder","required","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","currentUser","useEffect","maxLength","onChange","target","minLength","AddPlacePopup","url","setUrl","ImagePopup","Login","onLogin","setEmail","password","setPassword","action","Register","onRegister","to","ProtectedRoute","Component","component","path","InfoTooltip","message","img","api","options","this","_url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_error","info","body","JSON","stringify","authorization","newapi","token","Authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","open","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","icon","infoTooltip","setInfoTooltip","userEmail","setUserEmail","checkToken","localStorage","getTokenEmail","data","removeItem","closeAllPopups","getInfoAndAvatar","result","catch","err","console","log","getCards","Provider","exact","signin","setItem","signup","deleteCard","filter","element","deleteLike","newCard","newCards","countLikeApi","newInfo","updateAvatar","updateInfo","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1ebfea0f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.ff16f24b.svg\";","import logo from '../images/logo.svg';\r\nimport { useLocation, useHistory } from 'react-router-dom'\r\n\r\nfunction Header({ email, onLogout }) {\r\n  const { pathname } = useLocation();\r\n  const history = useHistory();\r\n  function linkNoAuth(from) {\r\n    if ('/sign-in' === from) {\r\n      return (\r\n        <button\r\n          className=\"header__button\"\r\n          onClick={() => history.push('/sign-up')}\r\n        >\r\n          Регистрация\r\n        </button>)\r\n\r\n    } else if ('/sign-up' === from) {\r\n      return (\r\n        <button\r\n          className=\"header__button\"\r\n          onClick={() =>  history.push('/sign-in')}\r\n        >\r\n          Вход\r\n        </button>\r\n      )\r\n    }\r\n  };\r\n\r\n  function linkAuth() {\r\n    return (\r\n      <>\r\n        <span className=\"header__email\">{email}</span>\r\n        <button\r\n          className=\"header__button\"\r\n          onClick={ onLogout}\r\n        >\r\n          Выход\r\n      </button>\r\n      </>\r\n    )\r\n  }\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} className=\"header__logo\" alt=\"Логотип\" />\r\n      <div className=\"header__auth\">\r\n        {email\r\n          ? linkAuth()\r\n          : linkNoAuth(pathname)\r\n        }\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nfunction Card(props) {\r\n\r\n    const {\r\n        card,\r\n        onCardClick,\r\n        id,\r\n        onCardLike,\r\n        onCardDelete\r\n    } = props;\r\n\r\n    function handleLikeClick() {\r\n        return onCardLike(card);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        return onCardDelete(card);\r\n    }\r\n    const isOwn = card.owner._id === id;\r\n    const isLiked = card.likes.some(i => i._id === id);\r\n\r\n    const cardDeleteButtonClassName = (\r\n        `card__basket ${isOwn ? 'card__basket' : 'card__basket_hidden'}`\r\n    );\r\n    const cardLikeButtonClassName = `card__like ${isLiked ? 'card__like_active' : 'card__like'}`;\r\n\r\n    function handleClick() {\r\n        onCardClick(card);\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"card__id\">\r\n            <div className=\"card__element\">\r\n                <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleDeleteClick}></button>\r\n                <img className=\"card__img\" src={card.link} alt={card.name} onClick={handleClick} />\r\n                <div className=\"card__about\">\r\n                    <h3 className=\"card__name\">{card.name}</h3>\r\n                    <div>\r\n                        <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\r\n                        <p className=\"card__like-number\">{card.likes.length}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Card;","import React from \"react\";\r\n\r\nexport const CurrentUserContext = React.createContext();","import React, { useContext } from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const {\r\n    cards,\r\n    onEditProfile,\r\n    onAddPlace,\r\n    onEditAvatar,\r\n    onCardClick,\r\n    onCardLike,\r\n    onCardDelete\r\n  } = props;\r\n\r\n  const { name, about, avatar, _id } = useContext(CurrentUserContext);\r\n\r\n\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"profile\">\r\n\r\n        <div className=\"profile__list\">\r\n          <div className=\"profile__list-about\">\r\n            <div className=\"profile__icon\" onClick={onEditAvatar}>\r\n              <img className=\"profile__image\" src={avatar} alt=\"Аватар\" />\r\n            </div>\r\n\r\n            <div className=\"profile__all\">\r\n              <div className=\"profile__info\">\r\n                <h1 className=\"profile__name\">{name}</h1>\r\n                <button className=\"profile__button-red\" type=\"button\" onClick={onEditProfile}></button>\r\n              </div>\r\n              <p className=\"profile__about\">{about}</p>\r\n            </div>\r\n          </div>\r\n          <button className=\"profile__button-new\" type=\"button\" onClick={onAddPlace}></button>\r\n        </div>\r\n\r\n\r\n      </section>\r\n\r\n      <section className=\"card\">\r\n\r\n        {cards.map((card) => (\r\n          <Card\r\n            key={card._id}\r\n            card={card}\r\n            onCardClick={onCardClick}\r\n            id={_id}\r\n            onCardLike={onCardLike}\r\n            onCardDelete={onCardDelete}\r\n          />)\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer({loggedIn}) {\r\nif (loggedIn) {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );} else {\r\n    return(\r\n      <></>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n    const {\r\n        isOpen,\r\n        name,\r\n        title,\r\n        children,\r\n        submitButtonText,\r\n        onClose,\r\n        onSubmit,\r\n        auth\r\n    } = props;\r\n    return (\r\n\r\n        <div className={`popup popup_type_${name} ${isOpen && 'popup_opened'}`}>\r\n            <div className=\"popup__container\">\r\n                <form className={`popup__form popup__form_type_${name}`} name=\"info\" noValidate onSubmit={onSubmit}>\r\n                    <button className={`popup__close popup__close_type_${name}`} type=\"button\" onClick={onClose}></button>\r\n                    <h2 className={`popup__edit popup__edit popup__edit_type_${name}`}>{title}</h2>\r\n                    {children}\r\n                    {auth\r\n                        ? <></>\r\n                        : <button type=\"submit\" className={`popup__save popup__save_type_${name}`} onClick={onClose}>{submitButtonText}</button>\r\n                    }\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useRef } from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const {\r\n    isOpen,\r\n    onClose,\r\n    onUpdateAvatar\r\n  } = props;\r\n\r\n  const inputRef = useRef(null);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const infoUser = {\r\n      avatar: inputRef.current.value,\r\n    };\r\n    onUpdateAvatar(infoUser);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name='avatar'\r\n      title='Обновить аватар'\r\n      submitButtonText='Сохранить'\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label>\r\n        <input ref={inputRef} type=\"url\" name=\"link\" className=\"popup__input popup__input_info_avatar\" defaultValue=\"\" id=\"src-input\" placeholder=\"Ссылка на аватар\" required />\r\n        <span className=\"popup__input-error\" id=\"src-input-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React, { useState, useContext, useEffect } from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const {\r\n    isOpen,\r\n    onClose,\r\n    onUpdateUser\r\n  } = props;\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const infoUser = {\r\n      name: name,\r\n      about: description\r\n    };\r\n    onUpdateUser(infoUser);\r\n  }\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeAbout(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n  return (\r\n    <PopupWithForm\r\n      name='profile'\r\n      title='Редактировать профиль'\r\n      submitButtonText='Сохранить'\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\" name=\"profileName\" className=\"popup__input  popup__input_info_name-profile\" id=\"name-input\" defaultValue={name} required=\"2\" maxLength=\"40\" onChange={handleChangeName} />\r\n        <span className=\"popup__input-error\" id=\"name-input-error\">Пустое поле</span>\r\n      </label>\r\n      <label className=\"popup__field\">\r\n        <input type=\"text\" name=\"about\" className=\"popup__input popup__input_info_about-profile\" id=\"about-input\" defaultValue={description} required minLength=\"2\" maxLength=\"200\" onChange={handleChangeAbout} />\r\n        <span className=\"popup__input-error\" id=\"about-input-error\">Пустое поле</span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import React, { useState } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n    const {\r\n        isOpen,\r\n        onClose,\r\n        onAddPlace\r\n    } = props;\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [url, setUrl] = useState(\"\");\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        const newCard = {\r\n            name: name,\r\n            link: url\r\n        };\r\n        onAddPlace(newCard);\r\n    }\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n    function handleChangeUrl(e) {\r\n        setUrl(e.target.value);\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name='card'\r\n            title='Новое место'\r\n            submitButtonText='Создать'\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <label>\r\n                <input value={name} type=\"text\" name=\"name\" className=\"popup__input popup__input_info_name-photo\" id=\"img-name-input\" placeholder=\"Название\" required minLength=\"2\" maxLength=\"30\" onChange={handleChangeName} />\r\n                <span className=\"popup__input-error\" id=\"img-name-input-error\"></span>\r\n            </label>\r\n            <label>\r\n                <input value={url} type=\"url\" name=\"link\" className=\"popup__input popup__input_info_link-photo\" id=\"url-input\" placeholder=\"Ссылка на картинку\" required onChange={handleChangeUrl} />\r\n                <span className=\"popup__input-error\" id=\"url-input-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n\r\n  const {\r\n    isOpen,\r\n    link,\r\n    name,\r\n    onClose\r\n  } = props;\r\n\r\n  return (\r\n    <div className={`popup popup_type_photo ${isOpen && 'popup_opened'}`}>\r\n      <figure className=\"popup__photo\">\r\n        <div className=\"popup__conteiner\">\r\n          <button className=\"popup__close popup__close_type_photo\" type=\"button\" onClick={onClose}></button>\r\n          <img className=\"popup__photo-image\" src={link} alt={name} />\r\n          <figcaption className=\"popup__photo-name\">{name}</figcaption>\r\n        </div>\r\n      </figure>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nfunction Login({ onLogin }) {\r\n  const [email, setEmail] = React.useState('')\r\n  const [password, setPassword] = React.useState('')\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault()\r\n    onLogin({ email, password })\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <h2 className=\"auth__title\">Вход</h2>\r\n      <form\r\n        className=\"auth__form\"\r\n        name=\"loginForm\"\r\n        onSubmit={handleSubmit}\r\n        action=\"#\"\r\n        noValidate\r\n      >\r\n        <input\r\n          className=\"auth__input\"\r\n          id=\"login-email\"\r\n          name=\"loginEmail\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          type=\"email\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n        />\r\n        <input\r\n          className=\"auth__input\"\r\n          id=\"login-password\"\r\n          name=\"loginPassword\"\r\n          placeholder=\"Пароль\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          type=\"password\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n        />\r\n        <button className=\"auth__button\" type=\"submit\">Войти</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register ({ onRegister }) {\r\n  const [email, setEmail] = React.useState('')\r\n  const [password, setPassword] = React.useState('')\r\n\r\n  function handleSubmit (e) {\r\n    e.preventDefault()\r\n    onRegister({ email, password })\r\n  }\r\n  return (\r\n    <div className=\"auth\">\r\n      <h2 className=\"auth__title\">Регистрация</h2>\r\n      <form\r\n        className=\"auth__form\"\r\n        name=\"loginForm\"\r\n        onSubmit={handleSubmit}\r\n        action=\"#\"\r\n        noValidate\r\n      >\r\n        <input\r\n          className=\"auth__input\"\r\n          id=\"login-email\"\r\n          name=\"loginEmail\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          type=\"email\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n        />\r\n        <input\r\n          className=\"auth__input\"\r\n          id=\"login-password\"\r\n          name=\"loginPassword\"\r\n          placeholder=\"Пароль\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          type=\"password\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n        />\r\n        <button className=\"auth__button\" type=\"submit\">Зарегистрироваться</button>\r\n        <p className=\"auth__info\">Уже зарегистрированы? <Link className=\"auth__link-in\" to=\"/sign-in\">Войти</Link></p>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n    return (\r\n        <Route>\r\n            {\r\n                props.loggedIn ? <Component {...props} path={props.path} /> : <Redirect to=\"/sign-in\" />\r\n            }\r\n        </Route>\r\n    )\r\n};\r\n\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction InfoTooltip({ isOpen, onClose, message, img }) {\r\n  return (\r\n    <PopupWithForm\r\n      name=\"message\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      auth={true}\r\n    >\r\n      <div className={`popup__auth_type_${img}`} />\r\n      <p className=\"popup__auth\">\r\n        {message}\r\n      </p>\r\n    </PopupWithForm>\r\n  )\r\n};\r\n\r\nexport default InfoTooltip;\r\n","class Api {\r\n  constructor(options) {\r\n    this._url = options.url;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  \r\n  _error(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } else  return Promise.reject(`Ошибка: ${res.status}`);\r\n\r\n  }\r\n\r\n  getCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    }).then(this._error)\r\n  }\r\n\r\n  newCard(info) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify(\r\n        info\r\n      )\r\n    }).then(this._error)\r\n  }\r\n\r\n  deleteCard(info) {\r\n    return fetch(`${this._url}/cards/${info._id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    }).then(this._error)\r\n  }\r\n\r\n  getInfoAndAvatar() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    }).then(this._error)\r\n  }\r\n\r\n  updateInfo(info) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify(\r\n        info\r\n      )\r\n    }).then(this._error)\r\n  }\r\n\r\n  updateAvatar(info) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify(\r\n        info\r\n      )\r\n    }).then(this._error)\r\n  }\r\n\r\n\r\n  deleteLike(info) {\r\n    return fetch(`${this._url}/cards/likes/${info._id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then(this._error)\r\n  }\r\n\r\n  countLikeApi(info) {\r\n    return fetch(`${this._url}/cards/likes/${info._id}`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    }).then(this._error)\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport const api = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-18',\r\n  headers: {\r\n      authorization: 'ab8fdcd7-fa1e-487f-a234-e9eb9d7b21b3',\r\n      'Content-Type': 'application/json'\r\n  }\r\n});","class NewApi {\r\n    constructor(options) {\r\n        this._url = options.url;\r\n    }\r\n    _error(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        } else return Promise.reject(`Ошибка: ${res.status}`);\r\n\r\n    }\r\n    signup({ email, password }) {\r\n        return fetch(`${this._url}/signup`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ email, password })\r\n        }).then(this._error)\r\n    }\r\n\r\n    signin({ email, password }) {\r\n        return fetch(`${this._url}/signin`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ email, password })\r\n        }).then(this._error)\r\n    }\r\n\r\n    getTokenEmail({ token }) {\r\n        return fetch(`${this._url}/users/me`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        }).then(this._error)\r\n    }\r\n\r\n\r\n}\r\n\r\nexport const newapi = new NewApi({\r\n    url: 'https://auth.nomoreparties.co'\r\n});","import React, { useState, useEffect } from 'react';\nimport '../index.css';\n\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\n\nimport { api } from '../utils/api';\nimport { newapi } from '../utils/newapi';\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { Route, Switch, useHistory } from 'react-router-dom';\n\n\nfunction App() {\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState({\n        open: false,\n        link: '',\n        name: '',\n    });\n    const [currentUser, setCurrentUser] = useState({});\n    const [cards, setCards] = useState([]);\n    const [loggedIn, setLoggedIn] = React.useState(false)\n    const [infoTooltip, setInfoTooltip] = React.useState({\n        message: '',\n        icon: '',\n        isOpen: false\n    })\n    const [userEmail, setUserEmail] = React.useState('')\n\n    const history = useHistory();\n\n    useEffect(() => {\n        api\n            .getInfoAndAvatar()\n            .then((result) => {\n                setCurrentUser(result);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }, []);\n\n    useEffect(() => {\n        api\n            .getCards()\n            .then((result) => {\n                setCards(result);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }, []);\n\n    function handleLogin({\n        email,\n        password }) {\n        newapi\n            .signin({\n                email,\n                password\n            })\n            .then((data) => {\n                if (data.token) {\n                    localStorage.setItem('token', data.token)\n                    setLoggedIn(true)\n                    checkToken()\n                }\n            })\n            .catch((err) => {\n                if (err.status === 400) {\n                    setInfoTooltip({\n                        message: 'Некорректно заполнено одно из полей',\n                        img: 'err',\n                        isOpen: true\n                    })\n                } else if (err.status === 401) {\n                    setInfoTooltip({\n                        message: 'Неверный логин или пароль',\n                        img: 'err',\n                        isOpen: true\n                    })\n                } else {\n                    setInfoTooltip({\n                        message: 'Что-то пошло не так! Попробуйте ещё раз',\n                        img: 'err',\n                        isOpen: true\n                    })\n                }\n            })\n    };\n\n    function handleRegister({\n        email,\n        password\n    }) {\n        newapi\n            .signup({\n                email,\n                password\n            })\n            .then((res) => {\n                if (res.data) {\n                    setInfoTooltip({\n                        message: 'Вы успешно зарегистрировались!',\n                        img: 'ok',\n                        isOpen: true\n                    })\n                    history.push('/sign-in')\n                }\n            })\n            .catch((err) => {\n                if (err.status === 400) {\n                    setInfoTooltip({\n                        message: 'Некорректно заполнено одно из полей',\n                        img: 'err',\n                        isOpen: true\n                    })\n                } else if (err.status === 409) {\n                    setInfoTooltip({\n                        message: 'Вы уже зарегистрированы',\n                        img: 'err',\n                        isOpen: true\n                    })\n                } else {\n                    setInfoTooltip({\n                        message: 'Что-то пошло не так! Попробуйте ещё раз',\n                        img: 'err',\n                        isOpen: true\n                    })\n                }\n            })\n    };\n\n    function checkToken() {\n        if (localStorage.token) {\n            newapi\n                .getTokenEmail({\n                    token: localStorage.token\n                })\n                .then((res) => {\n                    if (res.data) {\n                        setLoggedIn(true)\n                        history.push('/')\n                        setUserEmail(res.data.email)\n                    } else {\n                        localStorage.removeItem('token')\n                        setLoggedIn(false)\n                        setCurrentUser({})\n                        setUserEmail('')\n                    }\n                })\n        }\n    };\n\n    useEffect(() => {\n        checkToken();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    function handleUpdateUser(newInfo) {\n        api\n            .updateInfo(newInfo)\n            .then((result) => {\n                setCurrentUser(result);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleUpdateAvatar(newInfo) {\n        api\n            .updateAvatar(newInfo)\n            .then((result) => {\n                setCurrentUser(result);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleAddPlaceSubmit(newCard) {\n        api\n            .newCard(newCard)\n            .then((result) => {\n                setCards([result, ...cards]);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some((element) =>\n            element._id === currentUser._id);\n\n        if (!isLiked) {\n            api\n                .countLikeApi(card)\n                .then((newCard) => {\n                    const newCards = cards.map((element) =>\n                        element._id === card._id ? newCard : element);\n                    setCards(newCards);\n                })\n                .catch((err) => {\n                    console.log(err);\n                });\n        } else {\n\n            api\n                .deleteLike(card)\n                .then((newCard) => {\n                    const newCards = cards.map((element) =>\n                        element._id === card._id ? newCard : element);\n                    setCards(newCards);\n                })\n                .catch((err) => {\n                    console.log(err);\n                })\n        }\n    }\n\n    function handleLogout() {\n        localStorage.removeItem('token')\n        setLoggedIn(false)\n        setCurrentUser({})\n        setUserEmail('')\n    }\n\n    function handleCardDelete(card) {\n        api\n            .deleteCard(card)\n            .then(() => {\n                setCards(cards.filter((element) =>\n                    element._id !== card._id\n                ));\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function closeAllPopups() {\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setSelectedCard({\n            open: false,\n            link: '',\n            name: '',\n        });\n        setInfoTooltip({\n            open: false\n        });\n    }\n\n    function handleCardClick(card) {\n        const { link, name } = card;\n        setSelectedCard({\n            open: true,\n            link: link,\n            name: name\n        });\n    }\n\n    return (\n        <div className=\"root\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header\n                    email={userEmail}\n                    onLogout={handleLogout}\n                />\n                <Switch>\n                    <Route path='/sign-in' exact>\n                        <Login onLogin={handleLogin} />\n                    </Route>\n                    <Route path='/sign-up' exact>\n                        <Register onRegister={handleRegister} />\n                    </Route>\n                    <Route path='/'>\n                        <ProtectedRoute\n                            component={Main}\n                            loggedIn={loggedIn}\n                            onCardDelete={handleCardDelete}\n                            cards={cards}\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick}\n                            onCardLike={handleCardLike}\n                        />\n                    </Route>\n                </Switch>\n\n                <Footer loggedIn={loggedIn} />\n                <EditAvatarPopup\n                    isOpen={isEditAvatarPopupOpen}\n                    onClose={closeAllPopups}\n                    onUpdateAvatar={handleUpdateAvatar}\n                />\n\n                <EditProfilePopup\n                    isOpen={isEditProfilePopupOpen}\n                    onClose={closeAllPopups}\n                    onUpdateUser={handleUpdateUser}\n\n                />\n\n                <AddPlacePopup\n                    isOpen={isAddPlacePopupOpen}\n                    onClose={closeAllPopups}\n                    onAddPlace={handleAddPlaceSubmit}\n\n                />\n\n                <ImagePopup\n                    isOpen={selectedCard.open}\n                    name={selectedCard.name}\n                    link={selectedCard.link}\n                    onClose={closeAllPopups}\n                />\n\n                <InfoTooltip\n                    message={infoTooltip.message}\n                    img={infoTooltip.img}\n                    isOpen={infoTooltip.isOpen}\n                    onClose={closeAllPopups}\n                />\n            </CurrentUserContext.Provider>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}